(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{198:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var a=n(0),r=n(84),i=n(3),o=n(12),c=n.n(o),s=n(4),l=n(76),u=n(33),d=n(90),h=(n(263),n(264),(0===d.a.apps.length?d.a.initializeApp({apiKey:"AIzaSyBQwCcOJhGGbdLvYDn2yGHUQSxPZ_XD950",authDomain:"messengerapp-74646.firebaseapp.com",projectId:"messengerapp-74646",storageBucket:"messengerapp-74646.appspot.com",messagingSenderId:"1093326554239",appId:"1:1093326554239:web:b08e22dd299928532a6b4a",measurementId:"G-ENNTG5KS81"}):d.a.app()).firestore()),j=d.a.auth(),b=n(2),p=function(e){var t=e.navigation,n=Object(a.useState)(""),i=c()(n,2),o=i[0],d=i[1],h=Object(a.useState)(""),p=c()(h,2),f=p[0],m=p[1];Object(a.useEffect)((function(){return j.onAuthStateChanged((function(e){console.log(e),e&&t.replace("Home")}))}),[]);var x=function(){j.signInWithEmailAndPassword(o,f).catch((function(e){return alert(e)}))};return Object(b.jsxs)(l.a,{behavior:"padding",style:g.container,children:[Object(b.jsx)(r.a,{style:"light"}),Object(b.jsx)(u.c,{source:{uri:"https://blog.mozilla.org/internetcitizen/files/2018/08/signal-logo.png"},style:{width:200,height:200}}),Object(b.jsxs)(s.a,{style:g.inputContainer,children:[Object(b.jsx)(u.d,{placeholder:"Email",autoFocus:!0,type:"email",value:o,onChangeText:function(e){return d(e)}}),Object(b.jsx)(u.d,{placeholder:"Password",secureTextEntry:!0,type:"password",value:f,onChangeText:function(e){return m(e)},onSubmitEditing:x})]}),Object(b.jsx)(u.b,{containerStyle:g.button,onPress:x,title:"Login"}),Object(b.jsx)(u.b,{onPress:function(){return t.navigate("Register")},containerStyle:g.button,type:"outline",title:"Register"}),Object(b.jsx)(s.a,{style:{height:100}})]})},g=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10}}),f=n(288),m=n(289),x=function(e){var t=e.navigation,n=Object(a.useState)(""),i=c()(n,2),o=i[0],d=i[1],h=Object(a.useState)(""),p=c()(h,2),g=p[0],f=p[1],m=Object(a.useState)(""),x=c()(m,2),y=x[0],v=x[1],C=Object(a.useState)(""),S=c()(C,2),w=S[0],E=S[1];Object(a.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Back to Login"})}),[]);var T=function(){j.createUserWithEmailAndPassword(g,y).then((function(e){e.user.updateProfile({displayName:o,photoURL:w||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"})})).catch((function(e){return alert(e.message)}))};return Object(b.jsxs)(l.a,{behavior:"padding",style:O.container,children:[Object(b.jsx)(r.a,{style:"light"}),Object(b.jsx)(u.f,{h3:!0,style:{marginBottom:50},children:"Create an Account"}),Object(b.jsxs)(s.a,{style:O.inputContainer,children:[Object(b.jsx)(u.d,{placeholder:"Full Name",autofocus:!0,type:"text",value:o,onChangeText:function(e){return d(e)}}),Object(b.jsx)(u.d,{placeholder:"Email",type:"email",value:g,onChangeText:function(e){return f(e)}}),Object(b.jsx)(u.d,{placeholder:"Password",type:"password",secureTextEntry:!0,value:y,onChangeText:function(e){return v(e)}}),Object(b.jsx)(u.d,{placeholder:"Profile Picture URl (optional)",type:"text",value:w,onChangeText:function(e){return E(e)},onSubmitEditing:T})]}),Object(b.jsx)(u.b,{containerStyle:O.button,raised:!0,onPress:T,title:"Register"}),Object(b.jsx)(s.a,{style:{height:100}})]})},O=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},button:{width:200,marginTop:10},inputContainer:{width:300}}),y=n(51),v=n(75),C=n(28),S=function(e){var t,n,r,i=e.id,o=e.chatName,s=e.enterChat,l=Object(a.useState)([]),d=c()(l,2),j=d[0],p=d[1];return Object(a.useEffect)((function(){return h.collection("chats").doc(i).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return p(e.docs.map((function(e){return e.data()})))}))})),Object(b.jsxs)(u.e,{onPress:function(){return s(i,o)},bottomDivider:!0,children:[Object(b.jsx)(u.a,{rounded:!0,source:{uri:(null==j||null==(t=j[0])?void 0:t.photoURL)||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"}}),Object(b.jsxs)(u.e.Content,{children:[Object(b.jsx)(u.e.Title,{style:{fontWeight:"800"},children:o}),Object(b.jsxs)(u.e.Subtitle,{numberOfLines:1,ellipsizeMode:"tail",children:[null==j||null==(n=j[0])?void 0:n.displayName," : ",null==j||null==(r=j[0])?void 0:r.message]})]})]},i)},w=(i.a.create({}),n(179)),E=n(174),T=function(e){var t=e.navigation,n=Object(a.useState)([]),r=c()(n,2),i=r[0],o=r[1],l=function(){j.signOut().then((function(){t.replace("Login")}))};Object(a.useEffect)((function(){return h.collection("chats").onSnapshot((function(e){return o(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(a.useLayoutEffect)((function(){t.setOptions({title:"Messenger",headerStyle:{backgroundColor:"#fff"},headerTitleStyle:{color:"black"},headerTintColor:"black",headerLeft:function(){var e;return Object(b.jsx)(s.a,{style:{marginLeft:20},children:Object(b.jsx)(C.a,{onPress:l,activeOpacity:.5,children:Object(b.jsx)(u.a,{rounded:!0,source:{uri:null==j||null==(e=j.currentUser)?void 0:e.photoURL}})})})},headerRight:function(){return Object(b.jsxs)(s.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20},children:[Object(b.jsx)(C.a,{activeOpacity:.5,children:Object(b.jsx)(w.a,{name:"camerao",size:24,color:"black"})}),Object(b.jsx)(C.a,{onPress:function(){return t.navigate("AddChat")},activeOpacity:.5,children:Object(b.jsx)(E.a,{name:"pencil",size:24,color:"black"})})]})}})}),[t]);var d=function(e,n){t.navigate("Chat",{id:e,chatName:n})};return Object(b.jsx)(v.a,{children:Object(b.jsx)(y.a,{style:k.container,children:i.map((function(e){var t=e.id,n=e.data.chatName;return Object(b.jsx)(S,{id:t,chatName:n,enterChat:d},t)}))})})},k=i.a.create({container:{height:"100%"}}),L=n(18),R=n.n(L),P=n(110),N=function(e){var t=e.navigation,n=Object(a.useState)(""),r=c()(n,2),i=r[0],o=r[1];Object(a.useLayoutEffect)((function(){t.setOptions({title:"Add a new chat",headerBackTitle:"Chats"})}),[t]);var l=function(){return R.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.awrap(h.collection("chats").add({chatName:i}).then((function(){t.goBack()})).catch((function(e){return alert(e)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)};return Object(b.jsxs)(s.a,{style:U.container,children:[Object(b.jsx)(u.d,{placeholder:"Enter a chat name",value:i,onChangeText:function(e){return o(e)},onSubmitEditing:l,leftIcon:Object(b.jsx)(P.default,{name:"wechat",type:"antdesign",size:24,color:"black"})}),Object(b.jsx)(u.b,{disabled:!i,onPress:l,title:"Create new Chat"})]})},U=i.a.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),z=n(19),B=n(42),I=n(63),A=n(7),D=n(100),W=n(81),G=n(169),F=n(160),H=n(197),J=function(e){var t=e.navigation,n=e.route,r=Object(a.useState)(""),i=c()(r,2),o=i[0],d=i[1],p=Object(a.useState)([]),g=c()(p,2),f=g[0],m=g[1];Object(a.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitleVisible:!1,headerTitleAlign:"left",headerTitle:function(){var e;return Object(b.jsxs)(s.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(b.jsx)(u.a,{rounded:!0,source:{uri:null==(e=f[0])?void 0:e.data.photoURL}}),Object(b.jsx)(z.a,{style:{color:"white",marginLeft:10,fontWeight:"700"},children:n.params.chatName})]})},headerRight:function(){return Object(b.jsxs)(s.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20},children:[Object(b.jsx)(C.a,{children:Object(b.jsx)(G.a,{name:"video-camera",size:24,color:"white"})}),Object(b.jsx)(C.a,{children:Object(b.jsx)(G.a,{name:"phone",size:24,color:"white"})})]})}})}),[t,f]);var x=function(){W.a.dismiss(),h.collection("chats").doc(n.params.id).collection("messages").add({timestamp:H.a.firestore.Timestamp.now().toDate().toString(),message:o,displayName:j.currentUser.displayName,email:j.currentUser.email,photoURL:j.currentUser.photoURL})};return Object(a.useLayoutEffect)((function(){return h.collection("chats").doc(n.params.id).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return m(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[n]),Object(b.jsxs)(v.a,{style:{flex:1,backgroundColor:"white"},children:[Object(b.jsx)(B.a,{style:"light"}),Object(b.jsx)(l.a,{behavior:"android"===A.a.OS?"padding":"height",style:M.container,keyboardVerticalOffset:90,children:Object(b.jsx)(I.a,{onPress:W.a.dismiss,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(y.a,{contentContainerStyle:{paddingTop:15},children:f.map((function(e){var t=e.id,n=e.data;return n.email===j.currentUser.email?Object(b.jsxs)(s.a,{style:M.reciever,children:[Object(b.jsx)(u.a,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-15,right:-5},bottom:-15,right:-5,size:30,source:{uri:n.photoURL}}),Object(b.jsx)(z.a,{style:M.recieverText,children:n.message})]},t):Object(b.jsxs)(s.a,{style:M.sender,children:[Object(b.jsx)(u.a,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-15,left:-5},bottom:-15,left:-5,size:30,source:{uri:n.photoURL}}),Object(b.jsx)(z.a,{style:M.senderText,children:n.message}),Object(b.jsx)(z.a,{style:M.senderName,children:n.displayName})]},t)}))}),Object(b.jsxs)(s.a,{style:M.footer,children:[Object(b.jsx)(D.a,{value:o,onChangeText:function(e){return d(e)},onSubmitEditing:x,placeholder:"Message",style:M.textInput}),Object(b.jsx)(C.a,{onPress:x,activeOpacity:.5,children:Object(b.jsx)(F.a,{name:"send",size:24,color:"#2B68E6"})})]})]})})})]})},M=i.a.create({container:{flex:1},reciever:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{padding:15,backgroundColor:"#2B68E6",alignSelf:"flex-start",borderRadius:20,margin:15,maxWidth:"80%",position:"relative"},senderName:{left:10,paddingRight:10,fontSize:10,color:"white"},recieverText:{color:"black",fontWeight:"500",marginLeft:10},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},textInput:{bottom:0,height:40,flex:1,marginRight:15,borderColor:"transparent",backgroundColor:"#ECECEC",padding:10,color:"grey",borderRadius:30}}),K=Object(m.a)(),Q={headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white"},headerTintColor:"white"};function V(){return Object(b.jsx)(f.a,{children:Object(b.jsxs)(K.Navigator,{screenOptions:Q,children:[Object(b.jsx)(K.Screen,{name:"Login",component:p}),Object(b.jsx)(K.Screen,{name:"Register",component:x}),Object(b.jsx)(K.Screen,{name:"Home",component:T}),Object(b.jsx)(K.Screen,{name:"AddChat",component:N}),Object(b.jsx)(K.Screen,{name:"Chat",component:J})]})})}i.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},204:function(e,t,n){e.exports=n(271)}},[[204,1,2]]]);
//# sourceMappingURL=app.8ba4519e.chunk.js.map